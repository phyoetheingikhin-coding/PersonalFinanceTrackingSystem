@page "/"
@using PersonalFinanceTrackingSystem.Domain.Features.Authentication.Login;
@using PersonalFinanceTrackingSystem.Domain.Features.Authentication.Register
@using PersonalFinanceTrackingSystem.App.Components.Layout
@rendermode RenderMode.InteractiveServer
@inject NavigationManager Navigation
@inject LoginService _loginService
@inject RegisterService _registerService
@using MudBlazor;
@using Variant = MudBlazor.Variant
@layout EmptyLayout

<MudContainer Class="d-flex justify-center align-center min-vh-100">
    <MudCard Class="shadow-sm p-4" Style="width: 100%; max-width: 400px;">
        <MudCardContent>
            @if (!_isRegister)
            {
                <MudText Typo="Typo.h5" Class="mb-1 pt-2">Welcome 👋</MudText>
                <MudText Typo="Typo.body1" Class="mb-4">Please sign in to your account and start the adventure</MudText>
                
                <MudTextField Label="UserName" Placeholder="UserName" @bind-Value="_requestModel.UserName" MaxLength="11" Class="mb-3" />
                <MudTextField Label="Password" Placeholder="Password" @bind-Value="_requestModel.Password" MaxLength="11" InputType="InputType.Password" Class="mb-3" />
                
                <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="w-100 py-2" OnClick="Login">Sign In</MudButton>
                
                <MudText Typo="Typo.body2" Class="mt-3">
                    Don't have an account? <MudLink OnClick="() => ChangePage()">Register here</MudLink>.
                </MudText>
            }
            else
            {
                <MudText Typo="Typo.h5" Class="mb-1 pt-2">Register</MudText>
                <MudText Typo="Typo.body1" Class="mb-4">Please create an account to start your journey</MudText>
                
                <MudTextField Label="UserName" Placeholder="UserName" @bind-Value = "_requestModel.UserName" Class="mb-3" />
                <MudTextField Label="Phone No" Placeholder="Phone No" @bind-Value="_requestModel.PhoneNo" Class="mb-3" />
                <MudTextField Label="Password" Placeholder="Password" @bind-Value="_requestModel.Password" MaxLength="6" InputType="InputType.Password" Class="mb-3" />
                <MudTextField Label="Confirm Password" Placeholder="Confirm Password" @bind-Value="_requestModel.ConfirmPassword" MaxLength="6" InputType="InputType.Password" Class="mb-3" />
                
                <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="w-100 py-2" OnClick="Register">Register</MudButton>
                
                <MudText Typo="Typo.body2" Class="mt-3">
                    Already Registered? <MudLink OnClick="() => ChangePage()">Login here</MudLink>.
                </MudText>
            }
        </MudCardContent>
    </MudCard>
</MudContainer>